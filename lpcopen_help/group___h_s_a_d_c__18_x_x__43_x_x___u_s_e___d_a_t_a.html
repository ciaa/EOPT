<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>LPCOpen Platform for LPC18XX/43XX microcontrollers: Processing HSADC data</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="driver.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">LPCOpen Platform for LPC18XX/43XX microcontrollers
   &#160;<span id="projectnumber">18XX43XX</span>
   </div>
   <div id="projectbrief">LPCOpen Platform for the NXP LPC18XX/43XX family of Microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Processing HSADC data<div class="ingroups"><a class="el" href="group___h_s_a_d_c__18_x_x__43_x_x___u_s_e.html">LPC18xx/43xx High speed ADC driver use examples</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>HSADC samples are 12-bit in size and included appended status information. an optional channel ID, and may be packed with another sample. These support functions and macros allow the sample data from the FIFO or a DMA stream to be separated into it's individual parts.<br/>
</p>
<p><b>Getting and checking the HSADC sample</b><br/>
 A HSADC sample can be read from the HSADC FIFO with the <a class="el" href="group___h_s_a_d_c__18_x_x__43_x_x.html#ga0c89dc698fbb5f5c70b471bad3c15ae4" title="Reads the HSADC FIFO.">Chip_HSADC_GetFIFO()</a> function. It will read the oldest entry from the FIFO. The sample includes a valid data status flag and optional channel ID. The sample may also be packed with another sample.<br/>
</p>
<p>To determine if the sample is packed with another sample, mask the sample value with HSADC_FIFO_PACKEDMASK. If another sample exists, the other sample can be extracted with the <a class="el" href="group___h_s_a_d_c__18_x_x__43_x_x.html#ga59b2c13550ce54537ddba69cec51bd0b">HSADC_FIFO_SHIFTPACKED()</a> macro.<br/>
</p>
<p>Use the <a class="el" href="group___h_s_a_d_c__18_x_x__43_x_x.html#ga4e9d547e690f73b5e1cef272e5272239">HSADC_FIFO_SAMPLE()</a> and <a class="el" href="group___h_s_a_d_c__18_x_x__43_x_x.html#gaa90d96f985440d9588a1b0a3d3b30d9e">HSADC_FIFO_CHAN_ID()</a> macros to strip out the data and channel ID from the sample. Mask the sample with the HSADC_FIFO_EMPTY definition to determine if the sample is valid.<br/>
 </p>
<pre class="fragment"> uint32_t ch, data, sample[2];

    /* Get sample or packed samples */
 sample[0] = Chip_HSADC_GetFIFO(LPC_ADCHS);

 /* Is sample valid? */
 if (!(sample[0] &amp; HSADC_FIFO_EMPTY)) {
  /* Sample is not empty, shift off sample data and channel */
  data = HSADC_FIFO_SAMPLE(sample[0]);
  data = HSADC_FIFO_CHAN_ID(sample[0]);
 }

 /* Check for packed sample. Only need to do this if sample packing is
    enabled */
 if (sample[0] &amp; HSADC_FIFO_PACKEDMASK) {
  /* Packed sample exists, so get it */
  sample[1] = HSADC_FIFO_SHIFTPACKED(sample[0]);
 }
</pre> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu May 15 2014 09:23:23 for LPCOpen Platform for LPC18XX/43XX microcontrollers by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
